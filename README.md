iOS-Project-Image-Check
=======================

## 检查iOS工程中的图片资源引用

#### 需求

随着iOS项目开发的完结，工程中包含的大量图片资源很可能存在缺失某种分辨率资源或已不被使用的情况，为了排查这种情况，写个python小程序来做这种事是最方便快捷的。

#### 实现思路

最初的设想是通过分析xcode工程文件来收集工程文件，但是xcode工程文件格式复杂，无法轻易计算文件路径。最终采用直接遍历文件夹内容，采集所有的代码文件，包括代码文件和xib文件；还有图片资源，主要是png文件。

首先分析图片引用冗余，对于每一个图片资源，遍历所有的代码文件，查看是否存在特定格式的引用：主要包括xib文件中的直接引用和代码中的`imageName:@"xxx"]`格式。

然后分析图片资源的分辨率资源缺失，对于收集到的图片，通过一遍遍历向一个字典写入各个分辨率资源的缺失情况，最后再次遍历一遍输出结果。

#### 一些细节

在分析图片资源的引用的时候，由于需要读取文件耗时严重，又存在同一个资源具有不同分辨率文件的情况，所以添加一个字典用作缓存，这样可以加快搜索速度。

另外由于整个查找过程属于耗费cpu类型的操作，所以无法使用`gevent`等协程库，必须使用真正的线程库。
